<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teacher Dashboard - Ask Doubt</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet">

<link rel="stylesheet" href="/static/css/Tb.css">
<link rel="stylesheet" href="/static/css/sidebar.css">
<link rel="stylesheet" href="/static/css/footer.css">
</head>

<body>

<div id="mySidepanel">
  <span class="sidebar-close">‚úï</span>
  <a href="/" class="logout-link">Home</a>
  <a href="#ask-doubt" class="logout-link">Ask Doubt</a>
  <a href="#" class="logout-link">Resources</a>
  <a href="/community" class="logout-link">Community</a>
  <a href="/logout" class="logout-link">Logout</a>
</div>

<nav>
  <div class="logo">VEDA</div>
  <button class="hamburger" id="hamburgerBtn">‚ò∞</button>
</nav>

<header>
  <div class="header-left">
    <img src="/static/img/logo.png">
    <div>
      <div class="title">Teacher Dashboard</div>
      <div class="subtitle">Virtual Educator And Digital Assistant</div>
    </div>
  </div>

  <div class="toggle-container">
    <label class="switch">
      <input type="checkbox" id="toggleStatus">
      <span class="slider"></span>
    </label>
    <span class="status offline" id="statusText">Offline</span>
  </div>

  <div class="header-right user-profile">
    <img src="/static/img/user-icon.jpg">
    <span class="username">{{ user.username }}</span>
  </div>
</header>

<div class="ask-layout">

<form action="/teacher/ask" method="post" style="display: contents;">

  <!-- HIDDEN STATE (for persistence) -->
  <input type="hidden" id="selected_class" value="{{ selected_class or '' }}">
  <input type="hidden" id="selected_subject" value="{{ selected_subject or '' }}">
  <input type="hidden" id="selected_topic" value="{{ selected_topic or '' }}">

  <!-- LEFT -->
  <div class="dropdowns">
    <select name="class_name" id="classSelect" required>
      <option value="">Class</option>
      {% for c in ["Class 1","Class 2","Class 3","Class 4","Class 5",
                   "Class 6","Class 7","Class 8","Class 9","Class 10"] %}
        <option value="{{ c }}" {% if selected_class == c %}selected{% endif %}>
          {{ c }}
        </option>
      {% endfor %}
    </select>

    <!-- ‚ö†Ô∏è DO NOT TOUCH THESE (JS CONTROLS THEM) -->
    <select name="subject" id="subjectSelect" required disabled>
      <option value="">Subject</option>
    </select>

    <select name="topic" id="topicSelect" required disabled>
      <option value="">Topic</option>
    </select>
  </div>

  <!-- RIGHT -->
  <div class="ask-doubt-section" id="ask-doubt">

    <h2>Ask Your Doubt</h2>

    <div class="doubt-input-wrapper">
      <textarea
        class="doubt-textarea"
        name="question"
        placeholder="Type your doubt here..."
        required></textarea>
      <button type="button" class="mic-inside">üé§</button>
    </div>

    {% if engine_output %}
      <input type="hidden" id="request_id" value="{{ engine_output.request_id }}">
    {% endif %}

    <button class="ask-btn" type="submit">Enter</button>

    <div class="ai-response">
      <h2>AI Response</h2>

      <div class="items">
        {% if engine_output and engine_output.ranked_solutions %}
          {% for sol in engine_output.ranked_solutions %}
            <button type="button"
                    class="response-item"
                    data-solution-id="{{ sol.solution_id }}">
              {{ sol.text }}
              <br><small>Confidence: {{ sol.confidence }}</small>
            </button>
          {% endfor %}
        {% else %}
          <p style="opacity:0.7;">No suggestions yet.</p>
        {% endif %}
      </div>

      <div class="feedback-buttons">
        <button type="button" class="worked">Worked ‚úÖ</button>
        <button type="button" class="not-worked">Did Not Work ‚ùå</button>
      </div>
    </div>

    <div class="feedback-section">
      <label><b>Your Feedback:</b></label>
      <div class="feedback-input-wrapper">
        <textarea id="feedback" class="feedback-box"
                  placeholder="Enter your feedback here..."></textarea>
        <button type="button" class="send-inside">‚û§</button>
      </div>
    </div>

  </div>
</form>
</div>

<footer class="app-footer">
  <div class="footer-inner">
    <span>¬© 2026 VEDA ‚Äì Virtual Educator & Digital Assistant</span>
    <span>Made for Teachers</span>
  </div>
</footer>

<script src="/static/js/Tb.js"></script>
<script src="/static/js/sub.js"></script>
</body>
</html>