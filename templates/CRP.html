{% extends "base.html" %}

{% block title %}CRP Dashboard - VEDA{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="static/css/crp.css">
  <link rel="stylesheet" href="static/css/sidebar.css">
  <link rel="stylesheet" href="static/css/footer.css">
{% endblock %}

{% block content %}

  <div id="mySidepanel">
    <span class="sidebar-close" id="closeSidebar">✕</span>
    <a href="/" class="logout-link">Home</a>
    <a href="/logout" class="logout-link">Logout</a>
  </div>

  <div class="page-content">
    
    <nav>
      <div class="logo">VEDA</div>
      <button class="hamburger" id="hamburgerBtn">☰</button>
    </nav>

    <header class="crp-header">
      <div class="header-left">
        <img src="static/img/logo.png" alt="CRP">
        <div>
          <div class="title">Welcome, {{ user.name }}</div>
          <div class="subtitle">Virtual Educator And Digital Assistant</div>
        </div>
      </div>

      <div class="header-right">
        {% if user %}
        <a href="/profile" style="text-decoration:none;">
          <div style="width: 40px; height: 40px; background: #5CDB95; color: #05386B; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 18px; border: 2px solid #fff;">
            {{ user.name[0] | upper }}
          </div>
        </a>
        {% else %}
          <img src="/static/img/user-icon.jpg" alt="User" style="width:40px; height:40px; border-radius:50%;">
        {% endif %}
      </div>
    </header>

    <div class="section-title">Select Teacher</div>
    <div class="teacher-dropdown-wrapper">
      <select id="teacherDropdown">
        <option value="">Select a Teacher</option>
        <option value="t1">Anita Sharma (Class 6–8 · Mathematics)</option>
        <option value="t2">Rahul Patil (Class 5 · Science)</option>
        <option value="t3">Sneha Kulkarni (Class 8–10 · English)</option>
      </select>
    </div>

    <div class="section-title">Teacher Performance Overview</div>
    <div class="charts-grid">
      <div class="chart-card small">
        <canvas id="completionDonut"></canvas>
      </div>
      <div class="chart-card wide">
        <canvas id="teacherHistogram"></canvas>
      </div>
    </div>
    <br>

    <div class="section-title">CRP Actions</div>
    <div class="actions">
      <button>Reply to Teachers</button>
      <button>Upload Guidance</button>
      <button>Send Messages</button>
    </div>

  </div>

  <footer class="app-footer">
    <div class="footer-inner">
      <span>© 2026 VEDA – Virtual Educator & Digital Assistant</span>
      <span>Made for Teachers</span>
    </div>
  </footer>

{% endblock %}

{% block scripts %}
  <script src="/static/js/sidebar.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/static/js/crp.js"></script>
{% endblock %}