{% extends "base.html" %}

{% block title %}CRP Dashboard - VEDA{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="static/css/crp.css">
{% endblock %}

{% block content %}

  <div class="page-container">

    <header class="crp-header">
      <div class="header-left">
        <img src="static/img/logo.png" alt="CRP">
        <div>
          <div class="title">Welcome, {{ user.name }}</div>
          <div class="subtitle">Virtual Educator And Digital Assistant</div>
        </div>
      </div>

      <div class="header-right">
        {% if user %}
        <a href="/profile" style="text-decoration:none;">
          <div style="width: 40px; height: 40px; background: #5CDB95; color: #05386B; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 18px; border: 2px solid #fff;">
            {{ user.name[0] | upper }}
          </div>
        </a>
        {% else %}
          <img src="/static/img/user-icon.jpg" alt="User" style="width:40px; height:40px; border-radius:50%;">
        {% endif %}
      </div>
    </header>

    <div class="section-title">Select School</div>
    <div class="teacher-dropdown-wrapper">
      <select id="teacherDropdown">
        <option value="">Select a School</option>
        <option value="t1">Gurukul</option>
        <option value="t2">S.M.Joshi</option>
        <option value="t3">Waghire</option>
      </select>
    </div>

   <div class="section-title">CRP Actions</div>
    <div class="actions">
      <button>Reply to Teachers</button>
      <button>Upload Guidance</button>
      <button>Schedule Visit</button>
    </div>

    <div class="section-title">Teacher Performance Overview</div>
    <div class="charts-grid">
      <div class="chart-card small">
        <canvas id="completionDonut"></canvas>
      </div>
      <div class="chart-card wide">
        <canvas id="teacherHistogram"></canvas>
      </div>
    </div>
    <br>
   <!-- Upload Guidance Modal -->
<div id="uploadModal" class="upload-modal">
  <div class="upload-card">
    <h3>Upload Guidance</h3>

    <input
      type="file"
      id="guidanceFile"
      accept=".pdf,.doc,.docx,.ppt,.pptx,image/*,video/*"
      multiple
    />

    <div class="upload-actions">
      <button id="closeUpload">Cancel</button>
      <button id="submitUpload">Upload</button>
    </div>
  </div>
</div>
   <!-- Schedule Visit Modal -->
<div id="visitModal" class="upload-modal">
  <div class="upload-card">
    <h3>Schedule Visit</h3>

    <!-- Select School -->
    <label class="modal-label">Select School</label>
    <select id="visitSchool">
      <option value="">Select School</option>
      <option value="Gurukul">Gurukul</option>
      <option value="S.M.Joshi">S.M.Joshi</option>
      <option value="Waghire">Waghire</option>
    </select>

    <!-- Select Date -->
    <label class="modal-label">Select Date</label>
    <input type="date" id="visitDate">

    <!-- Select Time -->
    <label class="modal-label">Select Time</label>
    <input type="time" id="visitTime">

    <div class="upload-actions">
      <button id="closeVisit">Cancel</button>
      <button id="submitVisit">Schedule</button>
    </div>
  </div>
</div>

  </div>
{% endblock %}

{% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/static/js/crp.js"></script>
{% endblock %}