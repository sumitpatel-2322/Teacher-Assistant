{% extends "base.html" %}

{% block title %}Register | VEDA{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/register.css">
{% endblock %}

{% block content %}

<div class="auth-container">

  <h2>Register</h2>

  <form method="post" action="/register">

    <!-- ROLE -->
    <div class="input-group">
      <select class="input" id="role" name="role" required>
        <option value="" disabled selected></option>
        <option value="teacher">Teacher</option>
        <option value="crp">CRP</option>
        <option value="brp">BRP</option>
        <option value="arp">ARP</option>
      </select>
      <label class="user-label">Role</label>
    </div>

    <!-- TEACHER ID -->
    <div class="input-group">
      <input class="input" type="text" id="teacher_id" name="teacher_id" required>
      <label class="user-label">Teacher ID</label>
    </div>

    <!-- NAME -->
    <div class="input-group">
      <input class="input" type="text" id="name" name="name" required>
      <label class="user-label">Name</label>
    </div>

    <!-- SCHOOL NAME -->
    <div class="input-group">
      <input class="input" type="text" id="school_name" name="school_name" required>
      <label class="user-label">School Name</label>
    </div>

    <!-- USERNAME -->
    <div class="input-group">
      <input class="input" type="text" id="username" name="username" required>
      <label class="user-label">Username</label>
    </div>

    <!-- PASSWORD -->
    <div class="input-group">
      <input class="input" type="password" id="password" name="password" required>
      <label class="user-label">Password</label>
    </div>

    <!-- PASSWORD MESSAGE -->
    <p id="passwordMessage" class="password-msg"></p>
    <small class="password-hint">
      Password must contain uppercase, lowercase, digit, special character (min 8 characters)
    </small>

    <!-- CONFIRM PASSWORD -->
    <div class="input-group">
      <input class="input" type="password" id="confirm_password" name="confirm_password" required>
      <label class="user-label">Confirm Password</label>
    </div>

    <button type="submit">Register</button>
  </form>

  <p class="auth-switch">
    Have an account?
    <a href="/login">Login</a>
  </p>

</div>

{% endblock %}

{% block scripts %}
<script src="/static/js/sidebar.js"></script>
<script src="/static/js/login.js"></script>

<script>
  const passwordInput = document.getElementById("password");
  const message = document.getElementById("passwordMessage");

  passwordInput.addEventListener("input", function () {
    const password = passwordInput.value;
    const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&]).{8,}$/;

    if (!password) {
      message.textContent = "";
      return;
    }

    if (!regex.test(password)) {
      message.textContent =
        "Password must contain uppercase, lowercase, digit, special character (min 8 characters)";
      message.style.color = "red";
    } else {
      message.textContent = "Strong password âœ”";
      message.style.color = "green";
    }
  });
</script>
{% endblock %}
