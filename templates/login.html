<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Teacher-AssistantAI | Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="static/css/login.css">
  <link rel="stylesheet" href="static/css/sidebar.css">
</head>

<body>

<!-- ⚠ WARNING MESSAGE -->
<div id="loginWarning" style="
  display:none;
  background:#ffe6e6;
  color:#a00;
  padding:12px;
  text-align:center;
  font-weight:600;
">
  You are already logged in. Please logout first.
</div>

<!-- ================= NAVBAR ================= -->
<nav>
  <div class="logo">Teacher-AssistantAI</div>
  <button class="hamburger" id="hamburgerBtn">☰</button>
</nav>

<!-- ================= SIDEBAR ================= -->
<div id="mySidepanel">
  <span class="sidebar-close" id="closeSidebar">✕</span>
  <a href="/" class="btn">Home</a>
  <a href="/register" class="btn">Sign In</a>
</div>

<!-- ================= LOGIN CONTENT ================= -->
<div class="login-container">

  <h2>Login</h2>

  {% if error %}
    <p style="color:red; margin-bottom:10px; font-size:14px;">
      {{ error }}
    </p>
  {% endif %}

  <form method="post" action="/login">

    <label for="role">Role</label>
    <select id="role" name="role" required>
      <option value="">Select Role</option>
      <option value="teacher">Teacher</option>
      <option value="crp">CRP</option>
      <option value="brp">BRP</option>
      <option value="arp">ARP</option>
    </select>

    <label>Username</label>
    <input type="text" name="username" required>

    <label>Password</label>
    <input type="password" name="password" required>

    <button type="submit">Login</button>
  </form>

  <p>
    Don’t have an account?
    <a href="/register">Register here</a>
  </p>

</div>

<!-- ================= SIDEBAR SCRIPT ================= -->
<script src="static/js/login.js"></script>

<!-- ================= BACK BUTTON HANDLER ================= -->
<script>
  // Detect back/forward navigation from cache
  window.addEventListener("pageshow", function (event) {
    if (event.persisted) {
      document.getElementById("loginWarning").style.display = "block";

      setTimeout(() => {
        window.location.href = "/dashboard";
      }, 2000);
    }
  });
</script>

</body>
</html>
